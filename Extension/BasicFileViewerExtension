function BasicFileViewerExtension()
  local self = Extension("Basic file viewer")
  
  function self.onSceneLoad(scene)
    scene.getComponent("FileViewer").addViewer("Test", function(path) 
      return true
    end, 
    function(filePath) 
      local codeBox = {
        Type = "CodeBox",
        X = 1,
        Y = 1,
        RelativeWidth = "100%,-1",
        RelativeHeight = "100%,-1"
      }
      
      codeBox.OnLoad = function(_self)
        _self.Text = {}
        for line in io.lines(filePath) do
          table.insert(_self.Text, line)
        end
        _self.Tokens.parseCode(tableToString(_self.Text))
        
        if fs.isReadOnly(filePath) then 
          self.Editable = false
        end
      end
          
      local vsb = {
        Name = "VerticalScrollBar",
        Type = "ScrollBar",
        RelativeX = "100%",
        Y = 1,
        Width = 1,
        RelativeHeight = "100%,-1"
      }
      
      local hsb = {
        Name = "HorizontalScrollBar",
        Type = "ScrollBar",
        X = 1,
        RelativeY = "100%",
        RelativeWidth = "100%,-1"
      }
    
      return {
        Type = "View",
        X = 1,
        Y = 1,
        RelativeWidth = "100%",
        RelativeHeight = "100%",
        Children = {codeBox, vsb, hsb}
      } 
    end)
  end
  
  function self.handleSceneLoad(scene)
    return scene.getTag() == "ProjectViewScene"
  end
  
  return self
end

return BasicFileViewerExtension()